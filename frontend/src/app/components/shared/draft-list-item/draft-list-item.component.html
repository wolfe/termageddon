<div (click)="onItemClick()" [class]="getItemClass()" data-testid="draft-item">
  <div class="flex items-start justify-between">
    <div class="flex-1 min-w-0">
      <div class="flex items-center justify-between">
        <h3 class="font-semibold text-sm text-ui-text-emphasis truncate">
          {{ draft.entry.term.text }}
        </h3>
        @if (showPublishButton && canPublish(draft)) {
          <button
            (click)="onPublishClick($event)"
            class="px-2 py-1 bg-action-success text-white text-xs rounded hover:bg-action-success-hover"
            title="Ready to publish"
          >
            Publish
          </button>
        }
      </div>
      <app-perspective-pill
        [perspective]="draft.entry.perspective"
        [variant]="selected ? 'selected' : 'unselected'"
        [maxLength]="0"
      ></app-perspective-pill>

      <!-- Author and Approval Status -->
      <div class="flex items-center justify-between mt-2">
        <div class="flex items-center space-x-1">
          <!-- Author Avatar -->
          <div
            class="w-5 h-5 rounded-full bg-action-primary text-white text-xs flex items-center justify-center font-semibold"
            [title]="getAuthorTooltip()"
          >
            {{ getInitials(draft.author) }}
          </div>

          <!-- Approver Avatars -->
          @for (approver of draft.approvers; track approver.id) {
            <div
              class="w-5 h-5 rounded-full bg-role-approver text-white text-xs flex items-center justify-center font-semibold"
              [title]="getApproverTooltip(approver)"
            >
              {{ getInitials(approver) }}
            </div>
          }

          <!-- Requested Reviewer Avatars -->
          @for (reviewer of draft.requested_reviewers; track reviewer.id) {
            <div
              class="w-5 h-5 rounded-full bg-role-reviewer text-white text-xs flex items-center justify-center font-semibold"
              [title]="getReviewerTooltip(reviewer)"
            >
              {{ getInitials(reviewer) }}
            </div>
          }
        </div>

        <!-- Date (right-justified) -->
        <span class="text-xs opacity-75">
          {{ draft.created_at | date: 'short' }}
        </span>
      </div>
    </div>
  </div>
</div>
