<div class="search-filter-bar">
  <!-- Search Input -->
  <div class="relative mb-3">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      (ngModelChange)="onSearchInput()"
      (keypress)="onKeyPress($event)"
      [placeholder]="placeholder"
      class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-termageddon-accent text-sm"
    />
    @if (showClearButton && searchTerm) {
      <button
        (click)="onClear()"
        class="absolute right-2 top-2 text-gray-400 hover:text-gray-600"
      >
        âœ•
      </button>
    }
    @if (loading) {
      <div class="absolute right-2 top-2">
        <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-termageddon-accent"></div>
      </div>
    }
  </div>

  <!-- Filters -->
  @if (filters.length > 0) {
    <div class="filters-container">
      @for (filter of filters; track filter.id) {
        <div class="filter-item">
          @switch (filter.type) {
            @case ('checkbox') {
              <div class="flex items-center">
                <input
                  type="checkbox"
                  [id]="filter.id"
                  [checked]="filter.value"
                  (change)="onCheckboxChange(filter.id, $event)"
                  class="mr-2"
                />
                <label [for]="filter.id" class="text-sm text-gray-600">
                  {{ filter.label }}
                </label>
              </div>
            }
            @case ('select') {
              <div class="flex items-center space-x-2">
                <label [for]="filter.id" class="text-sm text-gray-600">
                  {{ filter.label }}:
                </label>
                <select
                  [id]="filter.id"
                  [value]="filter.value"
                  (change)="onSelectChange(filter.id, $event)"
                  class="px-2 py-1 border border-gray-300 rounded text-sm"
                >
                  @for (option of filter.options; track option.value) {
                    <option [value]="option.value">{{ option.label }}</option>
                  }
                </select>
              </div>
            }
            @case ('text') {
              <div class="flex items-center space-x-2">
                <label [for]="filter.id" class="text-sm text-gray-600">
                  {{ filter.label }}:
                </label>
                <input
                  type="text"
                  [id]="filter.id"
                  [value]="filter.value"
                  (input)="onTextChange(filter.id, $event)"
                  class="px-2 py-1 border border-gray-300 rounded text-sm"
                />
              </div>
            }
          }
        </div>
      }
    </div>
  }
</div>
